# ネットワーク通信

## リモート環境へアクセス
1. 公開鍵認証方式でリモート環境へアクセスする。まずは、講師から共有された秘密鍵ファイルを所定の位置に格納する。以下のコマンドを順次実行していけばよい。
    ```
    # ホームディレクトリ配下に .ssh ディレクトリを作成
    cd ~
    mkdir .ssh
    chmod 700 .ssh/

    # 秘密鍵ファイルを .ssh ディレクトリへ移動
    mv Downloads/training-2025-[username].pem .ssh/
    chmod 600 .ssh/training-2025-[username].pem
    ```
2. 以下のコマンドでリモートにログイン。
    ```
    ssh -i ~/.ssh/training-2025-[username].pem [username]@[リモートのIPアドレス]
    ```
    初回はパスワードの設定を求められる。

> [!NOTE] 
> `ssh` コマンドの `-i`  オプションは秘密鍵ファイルを指定するためのもの。


## シェルコマンドを使ってみる
- ディレクトリの内容を表示: `ls`
  - `-a` オプションで隠しファイルも表示
  - `-l` オプションで詳細情報を表示（管理権限等）
- ディレクトリの移動: `cd [移動先のパス]`
- ディレクトリの作成: `mkdir [ディレクトリ名]`
- ファイルの作成: `touch [ファイル名]`
- ファイルの閲覧: `cat [ファイル名]` または `open [ファイル名]`
  - `cat` はコマンドライン上で閲覧
  - `open` は別アプリを立ち上げて閲覧
- ファイルの編集: 
  - `vim [ファイル名]` で vim を起動
  - `i` でインサート（書き込み）モードに入る
  - `:w` で内容を保存
  - `q` でファイルを閉じる
- ファイルの移動: `mv [ファイル名]　[移動先のパス]`
- ファイル名の変更: `mv [旧ファイル名]　[新ファイル名]`
- ファイルの削除: `rm [ファイル名]`
- ファイルの圧縮: `zip [ファイル名]`
- 圧縮ファイルの解凍: `unzip [圧縮ファイル名]`


## ネットワーク通信
- ローカル・リモート間でファイルを転送する。ローカルのコマンドラインで以下のコマンドを実行する。
    ```
    scp -i ~/.ssh/training-2025-[username].pem コピー元パス 保存先パス
    ```
> [!TIP]
> - リモートパスの形式は `[username]@[リモートのIPアドレス]:パス` 
> - `~/` はホームディレクトリを意味し、`/` はルートディレクトリを指す。
> `-r` オプションでディレクトリを転送できる

- 他人のホームディレクトリ配下では権限（パーミッション）の問題で作業できないはず。`mkdir` コマンド等が実行できるか確認してみよう。
- 他人のローカル環境やWebサイトと意思疎通する。
    ```
    ping [ローカルIPアドレス]
    ```

> [!NOTE] 
> **パーミッションについて**
> - `ls -l` を実行し、権限情報を確認する。以下の画像のように表示されるはず。
    ![](/images/permission.png)
> - 左端の10桁のコードが各ファイル・ディレクトリの権限情報。
>   - 1文字目: `d` はディレクトリを、`-` はファイルを表す
>   - 2-4文字目: ユーザの権限
>   - 5-7文字目: ユーザが所属しているグループの権限
>   - 8-10文字目: その他の人の権限
> - r・w・x の意味
>   - r: 読み取り可（**r**ead）
>   - w: 書き込み可（**w**rite）
>   - x: 実行可（e**x**ecute）
> - 例: test.txt ファイル
>   - ユーザには読み取り・書き込み権限がある
>   - グループには読み取り・書き込み権限がある
>   - その他の人には読み取り権限がある